<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Recetas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div th:replace="~{common/header :: header}"></div>
<div class="container mt-4">

    <br>
    <h1 class="text-center mb-4">Buscador de Recetas </h1>

    <div class="row mb-3">
        <div class="col-md-4">
            <input id="searchInput" type="text" class="form-control" placeholder="Buscar por nombre...">
        </div>
        <div class="col-md-3">
            <select id="categoriaSelect" class="form-select">
                <option value="">Todas las categorías</option>
                <option value="Postre">Postre</option>
                <option value="Plato Principal">Plato Principal</option>
                <option value="Entrada">Entrada</option>
            </select>
        </div>
        <div class="col-md-3">
            <select id="dificultadSelect" class="form-select">
                <option value="">Todas las dificultades</option>
                <option value="Fácil">Fácil</option>
                <option value="Media">Media</option>
                <option value="Difícil">Difícil</option>
            </select>
        </div>
    </div>

    <table class="table table-striped table-hover text-center">
        <thead class="table-dark">
        <tr>
            <th>Nombre</th>
            <th>Categoría</th>
            <th>Dificultad</th>
            <th>Tiempo (min)</th>
        </tr>
        </thead>
        <tbody id="recetasTable">
        <tr>
            <td>Tiramisú</td>
            <td>Postre</td>
            <td>Media</td>
            <td>45</td>
        </tr>
        <tr>
            <td>Ensalada César</td>
            <td>Entrada</td>
            <td>Fácil</td>
            <td>15</td>
        </tr>
        <tr>
            <td>Lasagna</td>
            <td>Plato Principal</td>
            <td>Difícil</td>
            <td>90</td>
        </tr>
        <tr>
            <td>Brownies</td>
            <td>Postre</td>
            <td>Fácil</td>
            <td>30</td>
        </tr>
        <tr>
            <td>Sopa de Tomate</td>
            <td>Entrada</td>
            <td>Media</td>
            <td>40</td>
        </tr>
        </tbody>
    </table>
</div>

<br>
<div th:replace="~{common/footer :: footer}"></div>

<script>
    const searchInput = document.getElementById("searchInput");
    const categoriaSelect = document.getElementById("categoriaSelect");
    const dificultadSelect = document.getElementById("dificultadSelect");
    const table = document.getElementById("recetasTable");
    const rows = Array.from(table.getElementsByTagName("tr"));

    function filtrar() {
        const texto = searchInput.value.toLowerCase();
        const categoria = categoriaSelect.value;
        const dificultad = dificultadSelect.value;

        rows.forEach(row => {
            const nombre = row.cells[0].textContent.toLowerCase();
            const cat = row.cells[1].textContent;
            const dif = row.cells[2].textContent;

            const coincideTexto = nombre.includes(texto);
            const coincideCat = categoria === "" || cat === categoria;
            const coincideDif = dificultad === "" || dif === dificultad;

            if (coincideTexto && coincideCat && coincideDif) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    }

    searchInput.addEventListener("keyup", filtrar);
    categoriaSelect.addEventListener("change", filtrar);
    dificultadSelect.addEventListener("change", filtrar);
</script>

</body>
</html>
